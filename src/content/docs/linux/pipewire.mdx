---
title: 'PipeWire'
description: 'Установка и настройка PipeWire'
---

import { Steps } from '@astrojs/starlight/components'


[**PipeWire**](https://pipewire.org/) &mdash; это современный низкоуровневый
мультимедийный фреймворк.

## Установка

Этот раздел предназначен для самостоятельной установки PipeWire, без окружений
рабочего стола, таких как GNOME или KDE.

Для полноценной работы необходимо установить пакеты:

-   `pipewire` &mdash; Маршрутизатор и процессор аудио/видео с низкой задержкой
-   `pipewire-alsa` &mdash; Замена [ALSA](https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture) для работы с PipeWire
-   `pipewire-pulse` &mdash; Замена
    [PulseAudio](<https://wiki.archlinux.org/title/PulseAudio_(Русский)>) для
    работы с PipeWire
-   `wireplumber` &mdash; Реализация менеджера сеансов/политик для PipeWire

Я рекомендую установить дополнительные пакеты:

-   `pavucontrol` &mdash; Графический интерфейс для управления звуком
    (изначально создавался для PulseAudio, но работает с PipeWire).
-   `sof-firmware` &mdash; Микрокод "Sound Open Firmware" (например, для
    поддержки встроенных динамиков)

```shell title="Минимальная установка"
sudo pacman -S pipewire pipewire-alsa pipewire-pulse wireplumber
```

```shell title="Расширенная установка"
sudo pacman -S pavucontrol pipewire pipewire-alsa pipewire-pulse sof-firmware wireplumber
```

## Управление звуком

Команды, приведённые ниже, могут быть полезны для управления звуком из
скриптов, в сочетаниях клавиш и проч.

```shell title="Увеличить громкость"
wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.05+
```

```shell title="Уменьшить громкость"
wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.05-
```

```shell title="Переключить звук (mute/unmute)"
wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
```

## Устранение неполадок

### Устройство, подключённое по Bluetooth, не отображается среди устройств вывода PulseAudio

Если устройство подключено по Bluetooth, но не отображается как выходное
устройство (например, в `pavucontrol`), следующие шаги могут решить проблему.

<Steps>

1.  Убедиться в том, что устройство подключено (замените `XX:XX:XX:XX:XX:XX` на
    фактический MAC-адрес):
    
    ```shell
    bluetoothctl connect XX:XX:XX:XX:XX:XX
    ```

    Вывод должен заканчиваться строкой наподобие `Connection successful`.

2.  Проверить, что устройство не отображается среди устройств вывода:
    
    ```shell
    pactl list short sinks | grep bluez
    ```

3.  Добавьте следующую политику в файл `/etc/bluetooth/main.conf`:

    ```shell frame="none"
    [General]
    Enable=Control,Gateway,Headset,Media,Sink,Socket,Source
    ```

</Steps> 
