---
title: 'NetworkManager'
---

import { Steps, Tabs, TabItem } from '@astrojs/starlight/components'

[NetworkManager](https://networkmanager.dev/) &mdash; это программа для
обнаружения и настройки систем для автоматического подключения к сетям. Функции
NetworkManager могут быть полезны как для беспроводных, так и для проводных
сетей.

## Подключение к сети

Проблема с подключением к сети периодически возникает после установки системы.
Например, недавно мы настраивали подключение после установки NixOS.

В целом, алгоритм следующий:

<Steps>

1.  Определить, какие интерфейсы доступны на устройстве.
2.  Включить интерфейс, разблокировав его по необходимости.
3.  Подключиться к сети.

</Steps>

При этом можно использовать разные программы, например, в зависимости от того,
что идёт "из коробки" с установленным дистрибутивом.

Эта проблема, в основном, характерна для беспроводных подключений.
Проводной Интернет, как правило, "просто работает".

### Пример

<Steps>

1.  Определить доступные интерфейсы:

    <Tabs>
        <TabItem label="Системы с ip">
            ```shell
            ip link show
            ```
        </TabItem>
        <TabItem label="Системы с ifconfig">
            ```shell
            ifconfig -a
            ```
        </TabItem>
    </Tabs>

    Скорее всего, будет выведен список наподобие:

    ```
    1: lo:  mtu 16436 qdisc noqueue state UNKNOWN
        link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    2: eth0:  mtu 1500 qdisc mq state UP qlen 1000
        link/ether b8:ac:6f:65:31:e5 brd ff:ff:ff:ff:ff:ff
    3: wlan0:  mtu 1500 qdisc mq state DOWN qlen 1000
        link/ether 00:21:6a:ca:9b:10 brd ff:ff:ff:ff:ff:ff
    ```

    Имена интерфейсов могут отличаться, но:

    -   `lo` &mdash; это loopback, т.е. ссылка на само устройство.
    -   `eth*`, `enp*` (и _проч._, что начинается с `e`) &mdash; проводной Интернет (от Ethernet).
    -   `wlan*`, `wlp*` (и _проч_, что начинается с `w`) &mdash; беспроводной Интернет (от Wi-Fi).

    :::caution

    Если у вас **точно** есть какой-то интерфейс (например, вы знаете, что у
    ноутбука есть адаптер для беспроводных подключений), но он не показывается
    &mdash; скорее всего, у вас не установлены соответствующие драйверы.

    Например, такая проблема встречается при установке Void Linux (я тоже с ней
    сталкивался).

    :::

2.  Включите (иногда говорят "поднимите") соответствующий интерфейс. См.
    предыдущий пункт для определения нужного интерфейса.

        <Tabs>
        <TabItem label="Системы с ip">
            ```shell
            ip link set <ваш интерфейс> up
            ```
        </TabItem>
        <TabItem label="Системы с ifconfig">
            ```shell
            ifconfig <ваш интерфейс> up
            ```
        </TabItem>

    </Tabs>

        В обеих командах замените `<ваш интерфейс>` на нужный интерфейс (см. пункт 1).

3.  Попробуйте подключиться к сети:

    ```shell
    nmcli device wifi connect <SSID> password <пароль>
    ```

    Замените `<SSID>` на название вашей сети (оно отображается в списке
    доступных подключений), `<пароль>` на пароль от этой сети.

4.  Проверьте, работает ли `ping`:

    ```shell
    ping shelepugin.ru
    ```

    Должны выводиться сообщения об обмене пакетами, например:

    ```shell
    64 bytes from 188.114.97.0: icmp_seq=1 ttl=56 time=9.67 ms
    64 bytes from 188.114.97.0: icmp_seq=2 ttl=56 time=11.9 ms
    64 bytes from 188.114.97.0: icmp_seq=3 ttl=56 time=11.8 ms
    64 bytes from 188.114.97.0: icmp_seq=4 ttl=56 time=11.6 ms
    ^C
    --- shelepugin.ru ping statistics ---
    4 packets transmitted, 4 received, 0% packet loss, time 3005ms
    rtt min/avg/max/mdev = 9.667/11.254/11.938/0.925 ms
    ```

    :::caution

    Если `ping` всё ещё **НЕ** работает после проделанных шагов, возможно, ваш
    адаптер заблокирован ядром Linux. В этом случае запустите:

    ```shell
    rfkill unblock wlan
    ```

    и проделайте шаги 1-4 заново.

    :::

</Steps>
