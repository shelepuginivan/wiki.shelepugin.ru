---
title: 'Обзор'
sidebar:
    order: 1
---

## Документация по разделам

Вы можете найти документацию для разных разделов конфигурации на следующих
страницах вики:

-   [`input {}`](/niri/configuration/input)
-   [`output {}`](/niri/configuration/output)
-   [`binds {}`](/niri/configuration/binds)
-   [`layout {}`](/niri/configuration/layout)
-   [верхнеуровневые опции](/niri/configuration/misc)
-   [`window-rule {}`](#)
-   [`animations {}`](#)
-   [`debug {}`](#)

## Загрузка

Niri загружает конфигурацию из `$XDG_CONFIG_HOME/niri/config.kdl` или `~/.config/niri/config.kdl`.
Если этого файла не существует, niri создаст его с содержимым
[по умолчанию](https://github.com/YaLTeR/niri/blob/main/resources/default-config.kdl).
Пожалуйста, используйте конфигурацию по умолчанию для начала вашей настройки niri.

Конфигурация обновляется динамически. Просто отредактируйте и сохраните файл &mdash;
изменения сразу применятся. Это включает комбинации клавиш, настройки вывода, правила
и всё остальное.

Чтобы использовать другой файл конфигурации, укажите его флагом `--config` или `-c`:

```shell
niri --config /путь/до/конфигурационного/файла
```

Вы также можете задать переменную окружения `$NIRI_CONFIG`, чтобы использовать другой
путь. Флаг `--config` всегда имеет больший приоритет. Если `$NIRI_CONFIG` или `--config`
указывают на несуществующий файл, конфигурация не будет загружена. 
Если переменная окружения `$NIRI_CONFIG` имеет значение пустой строки,
то она игнорируется и niri использует путь по умолчанию.

## Синтаксис

Конфигурационный файл написан в формате [KDL](https://kdl.dev/).

### Комментарии

Строки, начинающиеся с `//` являются комментариями. Они игнорируются.

Кроме того, вы можете поместить `/-` перед началом блока, чтобы
проигнорировать его целиком:

```kdl
/-output "eDP-1" {
    // Всё внутри этого блока игнорируется.
    // Дисплей не будет выключен, так как
    // весь блок закомментирован.
    off
}
```

### Флаги

Переключаемые опции в niri, как правило, определяются как флаги.
Добавление флага включает опцию, его пропуск или комментирование
выключает её. Например:

```kdl
// Опция "focus follows mouse" включена.
input {
    focus-follows-mouse

    // Другие опции...
}
```

```kdl
// Опция "focus follows mouse" выключена.
input {
    // focus-follows-mouse

    // Другие опции...
}
```

## Блоки

Большинство секций не могут повторятся. Например:

```kdl
// Это правильно: каждый блок встречается единожды.
input {
    keyboard {
        // ...
    }

    touchpad {
        // ...
    }
}
```

```kdl
// Это НЕ правильно: блок input встречается дважды.
input {
    keyboard {
        // ...
    }
}

input {
    touchpad {
        // ...
    }
}
```

Исключениями являются, к примеру, блоки, настраивающие разные устройства
поимённо:


```kdl
output "eDP-1" {
    // ...
}

// Это правильно: блок определяет настройки для другого устройства.
output "HDMI-A-1" {
    // ...
}

// Это НЕ верно: блок "eDP-1" уже есть выше.
// Это вызовет ошибку парсинга и не будет работать.
output "eDP-1" {
    // ...
}
```

## Значения по умолчанию

Если вы удалите большинство секций конфигурационного файла,
вы получите значения по умолчанию для этого блока.
Исключением являются `binds {}` &mdash; сочетания клавиш НЕ заполняются
значениями по умолчанию, поэтому убедитесь, что вы не стираете эту секцию.

## Политика в отношении критических изменений

Обратная совместимость конфигурации следует стандартам семантического
версионированния Rust/Cargo.

Патч (например, с `niri 0.1.3` до `niri 0.1.4`) *не должен* привести к ошибке
парсинга конфигурации, которая работала на предыдущей версии.

Минорный релиз (например, с `niri 0.1.3` до `niri 0.2.0`) *может* привести к
ошибке парсинга конфигурации, которая работала на предыдущей версии.
Однако, когда niri достигнет версии `niri 1.0.0`, мажорный релиз потребуется
для "поломки" рабочих конфигураций.

Исключениея могут быть сделаны для багов, связанных с парсингом.
Например, раньше niri принимал несколько привязок к одной и той же клавише,
но это не было предусмотрено и не давало никакого эффекта
(всегда использовалась первая привязка).

В одном из патчей niri перестал принимать это и стал вызывать сбой парсинга.
Это не абсолютное правило, я буду рассматривать потенциальное влияние каждого
подобного изменения, прежде чем принять решение о его продолжении.

Имейте в виду, что политика  критических применяется только к релизам niri.
Коммиты между релизами могут ломать и иногда ломают конфигурацию по мере
доработки новых функций. Однако я стараюсь ограничить их количество, поскольку
несколько человек работают с git-сборками.
